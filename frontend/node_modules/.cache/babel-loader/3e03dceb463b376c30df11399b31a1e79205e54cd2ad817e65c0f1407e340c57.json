{"ast":null,"code":"import _objectSpread from \"/home/daniel/go/src/github.com/DanielYevelkin/clutch-custom-gateway/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport React from \"react\";\nimport _ from \"lodash\";\nimport { useManagerContext } from \"./context\";\nvar _updateData = function updateData(manager, layoutKey, key, value) {\n  var data = manager.state[layoutKey].data;\n  _.set(data, key, value);\n  manager.update(layoutKey, {\n    data: data\n  });\n};\n/**\n * Use a registered data layout.\n *\n * If a hydrate function has been specified this and the layout's data has not been set and hydrate is true this will\n * populate it's data on the first invocation. If the layout has a cache key set to true and also has existing data OR\n * hydrate is false, hydrate will not be invoked.\n\n * @param key The name of the layout registered with the manager.\n * @param opts An options object to allow for things like disabling hydration by default\n */\nvar useDataLayout = function useDataLayout(key, opts) {\n  var manager = useManagerContext();\n  var options = _objectSpread({\n    hydrate: true\n  }, opts);\n  if (!Object.keys(manager.state).includes(key)) {\n    throw new Error(\"Non-existant data layout key: \".concat(key));\n  }\n  // n.b. reset error and loading state on load.\n  // This prevents previous errors from rendering until hydration is finished.\n  React.useEffect(function () {\n    manager.update(key, {\n      error: undefined,\n      isLoading: false\n    });\n  }, []);\n  React.useEffect(function () {\n    if (options.hydrate && !(manager.state[key].cache && !_.isEmpty(manager.state[key].data))) {\n      manager.hydrate(key);\n    }\n  }, [key]);\n  return {\n    assign: function assign(data) {\n      return data !== manager.state[key].data && manager.assign(key, data);\n    },\n    updateData: function updateData(dataKey, value) {\n      return _updateData(manager, key, dataKey, value);\n    },\n    hydrate: function hydrate() {\n      return manager.hydrate(key);\n    },\n    value: manager.state[key].data,\n    displayValue: function displayValue() {\n      var _a;\n      return ((_a = manager.state[key].data) === null || _a === void 0 ? void 0 : _a.toJSON) ? manager.state[key].data.toJSON() : manager.state[key].data;\n    },\n    isLoading: manager.state[key].isLoading,\n    error: manager.state[key].error\n  };\n};\nexport default useDataLayout;","map":{"version":3,"names":["React","_","useManagerContext","updateData","manager","layoutKey","key","value","data","state","set","update","useDataLayout","opts","options","_objectSpread","hydrate","Object","keys","includes","Error","concat","useEffect","error","undefined","isLoading","cache","isEmpty","assign","dataKey","displayValue","_a","toJSON"],"sources":["/home/daniel/go/src/github.com/DanielYevelkin/clutch-custom-gateway/frontend/node_modules/@clutch-sh/data-layout/dist/layout.js"],"sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport { useManagerContext } from \"./context\";\nconst updateData = (manager, layoutKey, key, value) => {\n    const { data } = manager.state[layoutKey];\n    _.set(data, key, value);\n    manager.update(layoutKey, { data });\n};\n/**\n * Use a registered data layout.\n *\n * If a hydrate function has been specified this and the layout's data has not been set and hydrate is true this will\n * populate it's data on the first invocation. If the layout has a cache key set to true and also has existing data OR\n * hydrate is false, hydrate will not be invoked.\n\n * @param key The name of the layout registered with the manager.\n * @param opts An options object to allow for things like disabling hydration by default\n */\nconst useDataLayout = (key, opts) => {\n    const manager = useManagerContext();\n    const options = { hydrate: true, ...opts };\n    if (!Object.keys(manager.state).includes(key)) {\n        throw new Error(`Non-existant data layout key: ${key}`);\n    }\n    // n.b. reset error and loading state on load.\n    // This prevents previous errors from rendering until hydration is finished.\n    React.useEffect(() => {\n        manager.update(key, { error: undefined, isLoading: false });\n    }, []);\n    React.useEffect(() => {\n        if (options.hydrate && !(manager.state[key].cache && !_.isEmpty(manager.state[key].data))) {\n            manager.hydrate(key);\n        }\n    }, [key]);\n    return {\n        assign: data => data !== manager.state[key].data && manager.assign(key, data),\n        updateData: (dataKey, value) => updateData(manager, key, dataKey, value),\n        hydrate: () => manager.hydrate(key),\n        value: manager.state[key].data,\n        displayValue: () => { var _a; return ((_a = manager.state[key].data) === null || _a === void 0 ? void 0 : _a.toJSON) ? manager.state[key].data.toJSON() : manager.state[key].data; },\n        isLoading: manager.state[key].isLoading,\n        error: manager.state[key].error,\n    };\n};\nexport default useDataLayout;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,CAAC,MAAM,QAAQ;AACtB,SAASC,iBAAiB,QAAQ,WAAW;AAC7C,IAAMC,WAAU,GAAG,SAAbA,UAAUA,CAAIC,OAAO,EAAEC,SAAS,EAAEC,GAAG,EAAEC,KAAK,EAAK;EACnD,IAAQC,IAAI,GAAKJ,OAAO,CAACK,KAAK,CAACJ,SAAS,CAAC,CAAjCG,IAAI;EACZP,CAAC,CAACS,GAAG,CAACF,IAAI,EAAEF,GAAG,EAAEC,KAAK,CAAC;EACvBH,OAAO,CAACO,MAAM,CAACN,SAAS,EAAE;IAAEG,IAAI,EAAJA;EAAK,CAAC,CAAC;AACvC,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMI,aAAa,GAAG,SAAhBA,aAAaA,CAAIN,GAAG,EAAEO,IAAI,EAAK;EACjC,IAAMT,OAAO,GAAGF,iBAAiB,CAAC,CAAC;EACnC,IAAMY,OAAO,GAAAC,aAAA;IAAKC,OAAO,EAAE;EAAI,GAAKH,IAAI,CAAE;EAC1C,IAAI,CAACI,MAAM,CAACC,IAAI,CAACd,OAAO,CAACK,KAAK,CAAC,CAACU,QAAQ,CAACb,GAAG,CAAC,EAAE;IAC3C,MAAM,IAAIc,KAAK,kCAAAC,MAAA,CAAkCf,GAAG,CAAE,CAAC;EAC3D;EACA;EACA;EACAN,KAAK,CAACsB,SAAS,CAAC,YAAM;IAClBlB,OAAO,CAACO,MAAM,CAACL,GAAG,EAAE;MAAEiB,KAAK,EAAEC,SAAS;MAAEC,SAAS,EAAE;IAAM,CAAC,CAAC;EAC/D,CAAC,EAAE,EAAE,CAAC;EACNzB,KAAK,CAACsB,SAAS,CAAC,YAAM;IAClB,IAAIR,OAAO,CAACE,OAAO,IAAI,EAAEZ,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACoB,KAAK,IAAI,CAACzB,CAAC,CAAC0B,OAAO,CAACvB,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI,CAAC,CAAC,EAAE;MACvFJ,OAAO,CAACY,OAAO,CAACV,GAAG,CAAC;IACxB;EACJ,CAAC,EAAE,CAACA,GAAG,CAAC,CAAC;EACT,OAAO;IACHsB,MAAM,EAAE,SAAAA,OAAApB,IAAI;MAAA,OAAIA,IAAI,KAAKJ,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI,IAAIJ,OAAO,CAACwB,MAAM,CAACtB,GAAG,EAAEE,IAAI,CAAC;IAAA;IAC7EL,UAAU,EAAE,SAAAA,WAAC0B,OAAO,EAAEtB,KAAK;MAAA,OAAKJ,WAAU,CAACC,OAAO,EAAEE,GAAG,EAAEuB,OAAO,EAAEtB,KAAK,CAAC;IAAA;IACxES,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMZ,OAAO,CAACY,OAAO,CAACV,GAAG,CAAC;IAAA;IACnCC,KAAK,EAAEH,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI;IAC9BsB,YAAY,EAAE,SAAAA,aAAA,EAAM;MAAE,IAAIC,EAAE;MAAE,OAAO,CAAC,CAACA,EAAE,GAAG3B,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI,MAAM,IAAI,IAAIuB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACC,MAAM,IAAI5B,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI,CAACwB,MAAM,CAAC,CAAC,GAAG5B,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACE,IAAI;IAAE,CAAC;IACpLiB,SAAS,EAAErB,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACmB,SAAS;IACvCF,KAAK,EAAEnB,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACiB;EAC9B,CAAC;AACL,CAAC;AACD,eAAeX,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}